name: push go build/test/publish

on:
  push:

jobs:
  go-build:
    name: go build test fmt check
    runs-on: ubuntu-latest
    steps:

    - name: Checkout
      uses: actions/checkout@master

    - name: Build
      run: make container        

    - name: Publish Image
      uses: craftech-io/package-action@v3.1.0
      with:
        tags: latest
        access_token: ${{ secrets.GITHUB_TOKEN }}
